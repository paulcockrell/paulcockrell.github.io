{"version":3,"sources":["zombiedice/frontend/app.cljs"],"mappings":"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","names":["zombiedice.frontend.app/yield-turn!","game-state","new-game-state","cljs.core/deref","zombiedice.state.state-manager/update-player-brains","zombiedice.state.state-manager/move-current-player-to-last","zombiedice.state.state-manager/reset-throws","zombiedice.state.state-manager/update-round-counter","zombiedice.state.state_manager.add_dice","zombiedice.entities.dice/init-dice","zombiedice.state.state-manager/set-action","zombiedice.state.state-manager/save-game-state!","zombiedice.frontend.app/reset-game!","zombiedice.state.state-manager/initial-game-state","zombiedice.frontend.app/play-turn!","zombiedice.state.state-manager/process-hand","zombiedice.state.state-manager/check-hand","zombiedice.frontend.app/looser-alert-component","zombiedice.state.state-manager/get-current-player","zombiedice.frontend.app/winner-alert-component","zombiedice.frontend.app/score-board-table","players","zombiedice.state.state-manager/get-players-sorted","current-player","cljs.core/count","cljs.core.doall","iter__5480__auto__","s__12488","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","b__12490","cljs.core/chunk-buffer","i__12489","map__12491","cljs.core/-nth","cljs.core/--destructure-map","cljs.core.get","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__12487","cljs.core/chunk-rest","map__12492","cljs.core/first","cljs.core/cons","cljs.core/rest","name","position","brains","is-current-player?","cljs.core._EQ_","tr-class","player-rank","zombiedice.state.state-manager/get-player-rank","action","zombiedice.state.state-manager/get-action","player-name","zombiedice.frontend.app/current-round-stats-table","throws","zombiedice.state.state-manager/get-throws","throw-totals","zombiedice.state.state-manager/get-throw-totals","s__12494","b__12496","i__12495","map__12497","iter__12493","map__12498","throw","feet","shots","cljs.core/random-uuid","zombiedice.frontend.app/update-players","new-player","zombiedice.state.state-manager/add-player","zombiedice.frontend.app/add-player-component","reagent.core.atom","p1__12499#","zombiedice.frontend.components/divider-horizontal","zombiedice.frontend.components/input","cljs.core/reset!","e","zombiedice.frontend.components/button","zombiedice.frontend.app/start-game-component","is-adding-players?","zombiedice.state.state-manager/get-players","zombiedice.state.state-manager/start-game!","zombiedice.state.state-manager/game-state","zombiedice.frontend.app/stats-component","round","zombiedice.state.state-manager/get-round","players-count","player-position","remaining-dice","zombiedice.frontend.app/current-dice-component","dices","zombiedice.state.state-manager/get-current-dice","s__12501","b__12503","i__12502","iter__12500","dice","cljs.core/name","zombiedice.frontend.app/game-ui-component","cljs.core.not_EQ_","zombiedice.frontend.components/card","zombiedice.frontend.components/section-title","zombiedice.frontend.app/players-ui-component","zombiedice.frontend.components/section-subtitle","zombiedice.frontend.app/zombie-dice-ui","zombiedice.frontend.app/mount-root","root","reagent.dom.client/create-root","js/document","reagent.dom.client.render","zombiedice.frontend.app/start","cljs.core.prn","zombiedice.frontend.app/init","zombiedice.frontend.app/stop","cljs.core/chunk-first"],"sourcesContent":["(ns zombiedice.frontend.app\n  (:require [zombiedice.entities.dice :as dice]\n            [reagent.core :as r]\n            [reagent.dom.client :as rc]\n            [zombiedice.frontend.components :as components]\n            [zombiedice.state.state-manager :as state]\n            [cljs.core :as c]))\n\n(defn yield-turn! [game-state]\n  (let [new-game-state\n        (-> @game-state\n            (state/update-player-brains)\n            (state/move-current-player-to-last)\n            (state/reset-throws)\n            (state/update-round-counter)\n            (state/add-dice (dice/init-dice))\n            (state/set-action :in-game))]\n    (state/save-game-state! game-state new-game-state)))\n\n(defn reset-game! [game-state]\n  (let [new-game-state\n        (-> state/initial-game-state\n            (state/add-dice (dice/init-dice)))]\n    (state/save-game-state! game-state new-game-state)))\n\n(defn play-turn! [game-state]\n  (let [new-game-state\n        (-> @game-state\n            (state/process-hand)\n            (state/check-hand))]\n    (state/save-game-state! game-state new-game-state)))\n\n(defn looser-alert-component [game-state]\n  [:div\n   {:class \"bg-secondary/50 border-b border-secondary/40 text-amber-700 text-sm p-4 flex justify-between\"}\n   [:div\n    [:div.flex.items-center\n     [:span.pr-4 \"\ud83d\udca5\"]\n     [:p\n      (str (:name (state/get-current-player @game-state)) \" has been shot too many times. You loose this rounds brains\")]]]])\n\n(defn winner-alert-component [game-state]\n  [:div\n   {:class \"bg-primary/50 border-b border-primary/40 text-lime-700 text-sm p-4 flex justify-between\"}\n   [:div\n    [:div.flex.items-center\n     [:span.pr-4 \"\ud83e\udddf\u200d\u2642\ufe0f\"]\n     [:p\n      (str (:name (state/get-current-player @game-state)) \" has won!\")]]]])\n\n(defn score-board-table\n  \"Render a table of players in the game with their accumulated brain\n  consumption tally\"\n  [game-state]\n  (let [players (state/get-players-sorted @game-state)\n        current-player (state/get-current-player @game-state)]\n    (if (< 0 (count players))\n      [:table {:class \"w-full caption-bottom text-sm\"}\n       [:thead {:class \"[&_tr]:border-b\"}\n        [:tr {:class \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\"}\n         [:th {:class \"h-10 px-2 text-left align-middle font-medium text-muted-foreground w-[100px]\"}\n          \"Name\"]\n         [:th {:class \"h-10 px-2 align-middle font-medium text-muted-foreground text-right\"}\n          \"Position\"]\n         [:th {:class \"h-10 px-2 align-middle font-medium text-muted-foreground text-right\"}\n          \"Rank\"]\n         [:th {:class \"h-10 px-2 align-middle font-medium text-muted-foreground text-right\"}\n          \"Brains\"]]]\n       [:tbody {:class \"[&_tr:last-child]:border-0\"}\n        (doall (for [{:keys [name position brains]} players]\n                 (let [is-current-player? (= name (:name current-player))\n                       tr-class (if is-current-player? \"border-b bg-primary/10\" \"border-b\")\n                       player-rank (state/get-player-rank @game-state name)\n                       action (state/get-action game-state)\n                       player-name (cond\n                                     (not is-current-player?) name\n                                     (= action :game-over)   (str name \" \ud83c\udfc6\")\n                                     :else                   (str name \" \ud83c\udfb2\"))]\n                   [:tr {:key name :class tr-class}\n                    [:td {:class \"p-2 align-middle font-medium\"} player-name]\n                    [:td {:class \"p-2 align-middle text-right\"} position]\n                    [:td {:class \"p-2 align-middle text-right\"} player-rank]\n                    [:td {:class \"p-2 align-middle text-right\"} brains]])))]]\n      [:table {:class \"w-full caption-bottom text-sm\"}\n       [:tbody {:class \"[&_tr:last-child]:border-0\"}\n        [:tr {:class \"border-b\"}\n         [:td \"No players - add between 2 and 5 to start\"]]]])))\n\n(defn current-round-stats-table [game-state]\n  (let [throws (state/get-throws game-state)\n        throw-totals (state/get-throw-totals @game-state)]\n    [:table {:class \"w-full caption-bottom text-sm\"}\n     [:thead {:class \"[&_tr]:border-b\"}\n      [:tr {:class \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\"}\n       [:th {:class \"h-10 px-2 text-left align-middle font-medium text-muted-foreground w-[100px]\"}\n        \"Throw\"]\n       [:th {:class \"h-10 px-2 align-middle font-medium text-muted-foreground text-right\"}\n        \"Feet\"]\n       [:th {:class \"h-10 px-2 align-middle font-medium text-muted-foreground text-right\"}\n        \"Shotguns\"]\n       [:th {:class \"h-10 px-2 align-middle font-medium text-muted-foreground text-right\"}\n        \"Brains\"]]]\n     [:tbody {:class \"[&_tr:last-child]:border-0\"}\n      (for [{:keys [throw feet shots brains]} throws]\n        ^{:key (random-uuid)} [:tr {:class \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\"}\n                               [:td {:class \"p-2 align-middle font-medium\"} throw]\n                               [:td {:class \"p-2 align-middle text-right\"} feet]\n                               [:td {:class \"p-2 align-middle text-right\"} shots]\n                               [:td {:class \"p-2 align-middle text-right\"} brains]])]\n     [:tfoot {:class \"border-t bg-primary/10 font-medium [&>tr]:last:border-b-0\"}\n      [:tr {:class \"border-b\"}\n       [:td {:class \"p-2 align-middle\"} \"Total\"]\n       [:td {:class \"p-2 align-middle text-right\"} (:feet throw-totals)]\n       [:td {:class \"p-2 align-middle text-right\"} (:shots throw-totals)]\n       [:td {:class \"p-2 align-middle text-right\"} (:brains throw-totals)]]]]))\n\n(defn update-players [game-state new-player]\n  (let [new-game-state\n        (state/add-player @game-state @new-player)]\n    (state/save-game-state! game-state new-game-state)))\n\n(defn add-player-component\n  [game-state]\n  (let [name (r/atom \"\")]\n    (fn []\n      (when (= (:action @game-state) :adding-players)\n        [:<>\n         [components/divider-horizontal]\n         [:div\n          {:class \"grid grid-flow-col grid-rows-1 gap-4\"}\n          [components/input {:placeholder \"Player name\"\n                             :value @name\n                             :on-change #(reset! name (-> % .-target .-value))\n                             :on-key-press\n                             (fn [e]\n                               (when (= (.-key e) \"Enter\")\n                                 (update-players game-state name)\n                                 (reset! name \"\")))}]\n          [components/button {:label \"Add\"\n                              :variant :primary\n                              :on-click\n                              (fn []\n                                (update-players game-state name)\n                                (reset! name \"\"))}]]]))))\n\n(defn start-game-component\n  [game-state]\n  (let [is-adding-players? (= (:action @game-state) :adding-players)]\n    [components/button {:label (if is-adding-players? \"Start game\" \"Restart game\")\n                        :full-width true\n                        :disabled (< (count (state/get-players @game-state)) 2)\n                        :on-click #(if is-adding-players? (state/start-game! game-state) (reset-game! state/game-state))}]))\n\n(defn stats-component\n  [game-state]\n  (let [round (state/get-round @game-state)\n        players-count (count (state/get-players @game-state))\n        current-player (state/get-current-player @game-state)\n        player-position (:position current-player)\n        remaining-dice (count (:remaining-dice @game-state))]\n    [:div\n     {:class \"grid grid-cols-2 grid-rows-2 gap-0\"}\n     [:div\n      {:class \"relative z-30 flex flex-1 flex-col justify-center gap-1 border-t rounded-tl border-primary text-left even:border border px-4 py-2\"}\n      [:span\n       {:class \"text-xs text-gray-600\"} \"Round\"]\n      [:span\n       {:class \"text-lg font-bold leading-none sm:text-lg text-center\"} round]]\n     [:div\n      {:class \"relative z-30 flex flex-1 flex-col justify-center gap-1 border-t rounded-tr border-primary text-left border border-l-0 px-4 py-2\"}\n      [:span\n       {:class \"text-xs text-gray-600\"} \"Turn\"]\n      [:span\n       {:class \"text-lg font-bold leading-none sm:text-lg text-center\"} (str player-position \" of \" players-count)]]\n     [:div\n      {:class \"relative z-30 flex flex-1 flex-col justify-center gap-1 border-t rounded-bl border-primary text-left border border-t-0 px-4 py-2\"}\n      [:span\n       {:class \"text-xs text-gray-600\"} \"Throw\"]\n      [:span\n       {:class \"text-lg font-bold leading-none sm:text-lg text-center\"} (count (:throws @game-state))]]\n     [:div\n      {:class \"relative z-30 flex flex-1 flex-col justify-center gap-1 border-t rounded-br border-primary text-left border border-t-0 border-l-0 px-4 py-2\"}\n      [:span\n       {:class \"text-xs text-gray-600\"} \"Dice remaining\"]\n      [:span\n       {:class \"text-lg font-bold leading-none sm:text-lg text-center\"} remaining-dice]]]))\n\n(defn current-dice-component [game-state]\n  (let [dices (state/get-current-dice @game-state)]\n    [:div {:class \"flex justify-center gap-4 text-4xl\"}\n     (for [dice dices]\n       ^{:key (random-uuid)} [:img {:src (str \"/images/dice-\" (name (:color dice)) \"-\" (name (:face dice)) \".png\")\n                                    :alt \"Descriptive text\"\n                                    :style {:width \"80px\"\n                                            :height \"auto\"}}])]))\n\n(defn game-ui-component [game-state]\n  (when (not= (state/get-action game-state) :adding-players)\n    [:<>\n     [stats-component game-state]\n\n     (let [player-name (:name (state/get-current-player @game-state) \"n/a\")]\n       [components/card\n        [:<>\n         [components/section-title (str \"Current zombie - \" player-name)]\n         [current-round-stats-table game-state]]])\n\n     [components/card\n      [:<>\n       [components/section-title \"Dice rolled\"]\n       [current-dice-component game-state]]]\n\n     (when (= (state/get-action game-state) :turn-over)\n       [looser-alert-component game-state])\n\n     (when (= (state/get-action game-state) :game-over)\n       [winner-alert-component game-state])\n\n     [:div {:class \"flex flex-col sm:flex-row gap-2 justify-around\"}\n      [components/button {:label \"Roll dice\"\n                          :variant :primary\n                          :disabled (or (= (:action @game-state) :turn-over) (<= (count (:remaining-dice @game-state)) 0) (= (state/get-action game-state) :game-over))\n                          :on-click #(play-turn! game-state)}]\n      [components/button {:label \"Yield turn\"\n                          :variant :outline\n                          :disabled (= (state/get-action game-state) :game-over)\n                          :on-click #(yield-turn! game-state)}]]]))\n\n(defn players-ui-component [game-state]\n  [components/card\n   [:<>\n    [components/section-title \"Score board\"]\n    [components/section-subtitle \"The first to eat at least 13 brains wins the game\"]\n    [score-board-table game-state]\n    [add-player-component game-state]]])\n\n(defn zombie-dice-ui [game-state]\n  [:div {:class \"p-4 space-y-4 max-w-md mx-auto\"}\n   [:h1 {:class \"text-xl font-bold text-center\"} \"Zombie Dice\"]\n   [players-ui-component game-state]\n   [start-game-component game-state]\n   [game-ui-component game-state]])\n\n(defn mount-root []\n  (let [root (rc/create-root (.getElementById js/document \"root\"))]\n    (rc/render root (zombie-dice-ui state/game-state))))\n\n;; start is called by init and after code reloading finishes\n(defn ^:dev/after-load start []\n  (prn \"Zombie Dice starting\")\n  (reset-game! state/game-state)\n  (mount-root))\n\n(defn init []\n  ;; init is called ONCE when the page loads\n  ;; this is called in the index.html and must be exported\n  ;; so it is available even in :advanced release builds\n  (start))\n\n;; this is called before any code is reloaded\n(defn ^:dev/before-load stop []\n  (prn \"stop\"))\n"]}